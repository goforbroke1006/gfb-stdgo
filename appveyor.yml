image: Visual Studio 2015

init:
- git config --global core.autocrlf input

#clone_folder: c:\projects\native-web-app
#shallow_clone: true

matrix:
  fast_finish: false

platform:
#- x64
- x86

configuration:
#- Debug
- Release

#artifacts:
#  - path: C:/projects/gfb-stdgo/build/CMakeFiles/CMakeOutput.log
#    name: build-CMakeOutput

environment:
  matrix:
  - TOOLCHAIN: msvc10
#  - TOOLCHAIN: msvc12
#  - TOOLCHAIN: msvc14

#  GTEST_INCLUDE_DIR:  'C:\Program Files (x86)\googletest-distribution\include'
#  GTEST_LIBRARY:      'C:\googletest-release-1.8.1\build\googlemock\gtest\Debug\gtestd.lib'
#  GTEST_MAIN_LIBRARY: 'C:\googletest-release-1.8.1\build\googlemock\gtest\Debug\gtest_maind.lib'

#install:
#- call ci\appveyor\set-env.bat %TOOLCHAIN% %PLATFORM%
#- appveyor DownloadFile https://github.com/google/googletest/archive/release-1.8.1.zip -FileName googletest.tar.gz
#- 7z e -y googletest.tar.gz -o"googletest"
#- 7z x -y "googletest.tar.gz" -o"C:\" > nul
#- cd C:\googletest-release-1.8.1\
#- mkdir build
#- cd build
#- cmake ..
#- cmake --build . --target install
#- dir /s /b /o:gn

#before_build:
#  - ps: cmake -G "Visual Studio 10"

build_script:
- cd %APPVEYOR_BUILD_FOLDER%
- mkdir build
- cd build
#- cmd: set GTEST_INCLUDE_DIR=C:/Program Files (x86)/googletest-distribution/include/
#- cmd: set GTEST_LIBRARY=C:\googletest-release-1.8.1\build\googlemock\gtest\Debug\gtestd.lib
#- cmd: set GTEST_MAIN_LIBRARY=C:\googletest-release-1.8.1\build\googlemock\gtest\Debug\gtest_maind.lib
- cmake .. -DCI_TESTS=OFF %CMAKE_CONFIGURE_FLAGS%
- cmake --build . --target install
#- mkdir build
#- cd build
#- cmake .. %CMAKE_CONFIGURE_FLAGS%
#- cmake . --build %CMAKE_BUILD_FLAGS% -DBUILD_TESTS=OFF
#- cmake -Bbuild -H. %CMAKE_BUILD_FLAGS%

#test_script:
#- C:\projects\gfb-stdgo\build\test\gfb-stdgo-test.exe
#- ctest -C %CONFIGURATION% --output-on-failure
